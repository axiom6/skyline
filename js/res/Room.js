// Generated by CoffeeScript 1.12.2
(function() {
  var Room,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Room = (function() {
    module.exports = Room;

    Room.Rooms = require('data/room.json');

    Room.States = ["free", "mine", "depo", "book"];

    function Room(stream, store, Data) {
      this.stream = stream;
      this.store = store;
      this.Data = Data;
      this.initRooms = bind(this.initRooms, this);
      this.rooms = Room.Rooms;
      this.states = Room.States;
      this.initRooms();
    }

    Room.prototype.createRoomUIs = function(rooms) {
      var key, room, roomUI, roomUIs;
      roomUIs = {};
      for (key in rooms) {
        room = rooms[key];
        roomUIs[key] = {};
        roomUI = roomUIs[key];
        roomUI.$ = {};
        roomUI.name = room.name;
        roomUI.total = 0;
        roomUI.price = 0;
        roomUI.guests = 2;
        roomUI.pets = 0;
        roomUI.spa = room.spa;
        roomUI.change = 0;
        roomUI.reason = 'No Changes';
        roomUI.days = {};
        roomUI.group = {};
      }
      return roomUIs;
    };

    Room.prototype.optSpa = function(roomId) {
      return this.rooms[roomId].spa === 'O';
    };

    Room.prototype.hasSpa = function(roomId) {
      return this.rooms[roomId].spa === 'O' || this.rooms[roomId].spa === 'Y';
    };

    Room.prototype.initRooms = function() {
      this.store.subscribe('Room', 'none', 'make', (function(_this) {
        return function(make) {
          _this.store.insert('Room', _this.rooms);
          return Util.noop(make);
        };
      })(this));
      return this.store.make('Room');
    };

    return Room;

  })();

}).call(this);
